<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Little Flower English School - Gallery & Announcements</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .gallery-container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .gallery-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .gallery-header h1 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .gallery-header p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
        }

        /* Announcements Section Styles */
        .announcements-section {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .announcements-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .announcements-title {
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .announcements-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .announcements-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .announcements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 15px;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .announcements-grid.collapsed {
            max-height: 200px;
        }

        .announcement-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .announcement-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .announcement-card:focus {
            outline: 2px solid white;
            outline-offset: 2px;
        }

        .announcement-priority {
            position: absolute;
            top: 0;
            right: 0;
            padding: 5px 10px;
            border-radius: 0 10px 0 10px;
            font-size: 0.7rem;
            font-weight: bold;
            text-transform: uppercase;
        }

        .priority-high {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
        }

        .priority-medium {
            background: linear-gradient(135deg, #ffd93d, #ffcd02);
            color: #333;
        }

        .priority-low {
            background: linear-gradient(135deg, #6bcf7f, #4caf50);
            color: white;
        }

        .announcement-date {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.8rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .announcement-title {
            color: white;
            font-size: 1rem;
            font-weight: bold;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .announcement-preview {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.85rem;
            line-height: 1.4;
            margin-bottom: 10px;
        }

        .announcement-content {
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.85rem;
            line-height: 1.5;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .announcement-card.expanded .announcement-content {
            max-height: 200px;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .announcement-expand-indicator {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.7rem;
            text-align: center;
            margin-top: 5px;
            transition: all 0.3s ease;
        }

        .announcement-card.expanded .announcement-expand-indicator {
            transform: rotate(180deg);
        }

        .announcement-category {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            margin-right: 5px;
            margin-bottom: 5px;
        }

        /* Custom scrollbar for announcements */
        .announcements-grid::-webkit-scrollbar {
            width: 6px;
        }

        .announcements-grid::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .announcements-grid::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
        }

        .announcements-grid::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }

        /* Pagination for announcements */
        .announcements-pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
        }

        .pagination-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .pagination-btn:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.3);
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination-info {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.8rem;
            margin: 0 10px;
        }

        .carousel-container {
            position: relative;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }

        .carousel-wrapper {
            display: flex;
            transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            will-change: transform;
        }

        .carousel-slide {
            min-width: 100%;
            position: relative;
            overflow: hidden;
        }

        .carousel-slide.grid-view {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
            min-width: 100%;
        }

        .image-container {
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
        }

        .image-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .carousel-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            transition: transform 0.3s ease;
            border-radius: 10px;
        }

        .grid-view .carousel-image {
            height: 250px;
        }

        .image-container:hover .carousel-image {
            transform: scale(1.05);
        }

        .image-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            color: white;
            padding: 30px 20px 20px;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }

        .image-container:hover .image-caption {
            transform: translateY(0);
        }

        .caption-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .caption-description {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .carousel-controls {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: none;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .carousel-controls:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-50%) scale(1.1);
        }

        .prev-btn {
            left: 20px;
        }

        .next-btn {
            right: 20px;
        }

        .carousel-indicators {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator.active {
            background: white;
            transform: scale(1.2);
        }

        .view-toggle {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .toggle-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: none;
            color: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-btn.active {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .toggle-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 90%;
            max-height: 90%;
            border-radius: 10px;
            overflow: hidden;
        }

        .modal-image {
            width: 100%;
            height: auto;
            max-height: 80vh;
            object-fit: contain;
        }

        .modal-caption {
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 30px;
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1001;
        }

        .close-modal:hover {
            opacity: 0.7;
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin: 50px auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .gallery-container {
                padding: 20px;
                margin: 10px;
            }

            .gallery-header h1 {
                font-size: 2rem;
            }

            .carousel-controls {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }

            .prev-btn {
                left: 10px;
            }

            .next-btn {
                right: 10px;
            }

            .carousel-slide.grid-view {
                grid-template-columns: 1fr;
                gap: 15px;
                padding: 15px;
            }

            .carousel-image {
                height: 250px;
            }

            .grid-view .carousel-image {
                height: 200px;
            }

            /* Mobile announcements */
            .announcements-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .announcements-header {
                flex-direction: column;
                align-items: stretch;
                text-align: center;
            }

            .announcements-title {
                justify-content: center;
                font-size: 1.3rem;
            }

            .announcement-card {
                padding: 12px;
            }

            .announcements-section {
                padding: 20px;
                margin-bottom: 25px;
            }
        }

        @media (max-width: 480px) {
            .gallery-container {
                padding: 15px;
                margin: 5px;
            }

            .gallery-header h1 {
                font-size: 1.5rem;
            }

            .view-toggle {
                flex-direction: column;
                align-items: center;
            }

            .toggle-btn {
                width: 200px;
            }

            /* Small mobile announcements */
            .announcements-section {
                padding: 15px;
            }

            .announcements-title {
                font-size: 1.2rem;
            }

            .announcement-card {
                padding: 10px;
            }

            .announcements-grid {
                max-height: 300px;
            }

            .announcements-grid.collapsed {
                max-height: 150px;
            }
        }

        /* Accessibility improvements */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }

        /* Focus styles for keyboard navigation */
        .carousel-controls:focus,
        .indicator:focus,
        .toggle-btn:focus,
        .image-container:focus,
        .announcements-toggle:focus,
        .pagination-btn:focus {
            outline: 2px solid white;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <div class="gallery-container">
        <div class="gallery-header">
            <h1>Little Flower English School</h1>
            <p>Gallery & Announcements</p>
        </div>

        <!-- Announcements Section -->
        <div class="announcements-section" id="announcementsSection">
            <div class="announcements-header">
                <h2 class="announcements-title">
                    📢 School Announcements
                </h2>
                <button class="announcements-toggle" id="announcementsToggle" aria-label="Toggle announcements view">
                    Show Less
                </button>
            </div>
            <div class="announcements-grid" id="announcementsGrid">
                <!-- Announcements will be loaded here -->
            </div>
            <div class="announcements-pagination" id="announcementsPagination">
                <!-- Pagination will be added here -->
            </div>
        </div>

        <div class="view-toggle">
            <button class="toggle-btn active" data-view="slider" aria-label="Switch to slider view">
                📷 Slider View
            </button>
            <button class="toggle-btn" data-view="grid" aria-label="Switch to grid view">
                🔲 Grid View
            </button>
        </div>

        <div class="carousel-container" role="region" aria-label="School gallery carousel">
            <div class="carousel-wrapper" id="carouselWrapper">
                <!-- Images will be loaded here -->
                <div class="loading"></div>
            </div>

            <button class="carousel-controls prev-btn" id="prevBtn" aria-label="Previous image">
                &#8249;
            </button>
            <button class="carousel-controls next-btn" id="nextBtn" aria-label="Next image">
                &#8250;
            </button>
        </div>

        <div class="carousel-indicators" id="indicators" role="tablist" aria-label="Gallery navigation">
            <!-- Indicators will be generated dynamically -->
        </div>
    </div>

    <!-- Modal for image popup -->
    <div class="modal" id="imageModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <span class="close-modal" id="closeModal" aria-label="Close modal">&times;</span>
        <div class="modal-content">
            <img class="modal-image" id="modalImage" alt="">
            <div class="modal-caption">
                <h3 id="modalTitle"></h3>
                <p id="modalDescription"></p>
            </div>
        </div>
    </div>

    <script>
        // School gallery data with placeholder images
        const galleryData = [
            {
                id: 1,
                src: 'https://plus.unsplash.com/premium_photo-1721921134127-d836717619eb?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
                title: 'School Main Hall',
                description: 'Our spacious main hall hosts assemblies, cultural events, and important ceremonies.',
                category: 'hall'
            },
            {
                id: 2,
                src: 'https://images.unsplash.com/photo-1552058461-dc1828d58bf6?q=80&w=2067&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
                title: 'School Canteen',
                description: 'Clean and hygienic canteen serving nutritious meals to students and staff.',
                category: 'canteen'
            },
            {
                id: 3,
                src: 'https://images.unsplash.com/photo-1498243691581-b145c3f54a5a?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
                title: 'Library',
                description: 'Well-stocked library with thousands of books, digital resources, and quiet study areas.',
                category: 'library'
            },
            {
                id: 4,
                src: 'https://images.unsplash.com/photo-1464983308776-3c7215084895?q=80&w=1074&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
                title: 'School Playground',
                description: 'Large playground with modern equipment for sports and recreational activities.',
                category: 'playground'
            },
            {
                id: 5,
                src: 'https://images.unsplash.com/photo-1608037222022-62649819f8aa?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
                title: 'Science Laboratory',
                description: 'Modern science lab equipped with latest instruments for hands-on learning.',
                category: 'laboratory'
            },
            {
                id: 6,
                src: 'https://images.unsplash.com/photo-1719159381981-1327b22aff9b?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c2Nob29sJTIwY29tcHV0ZXIlMjBsYWJ8ZW58MHx8MHx8fDA%3D',
                title: 'Computer Lab',
                description: 'State-of-the-art computer laboratory with high-speed internet and modern systems.',
                category: 'laboratory'
            },
            {
                id: 7,
                src: 'https://images.unsplash.com/photo-1580582932707-520aed937b7b?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
                title: 'Classroom',
                description: 'Bright and spacious classrooms designed for interactive learning.',
                category: 'classroom'
            },
            {
                id: 8,
                src: 'https://images.unsplash.com/photo-1674239172385-bf1f99c9c5f4?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
                title: 'School Garden',
                description: 'Beautiful garden where students learn about nature and environmental conservation.',
                category: 'garden'
            }
        ];

        // Announcements data
        const announcementsData = [
            {
                id: 1,
                title: "Annual Sports Day - 2025",
                date: "2025-08-15",
                category: "Events",
                priority: "high",
                preview: "Join us for the Annual Sports Day celebration with exciting competitions and performances.",
                content: "We are excited to announce our Annual Sports Day scheduled for August 15th, 2025. The event will feature various athletic competitions, cultural performances, and prize distribution. All students, parents, and staff are cordially invited to participate and cheer for our talented athletes. Registration for events is open until August 12th. Contact the sports department for more details."
            },
            {
                id: 2,
                title: "Parent-Teacher Meeting",
                date: "2025-08-12",
                category: "Academic",
                priority: "medium",
                preview: "Scheduled meeting to discuss student progress and academic performance.",
                content: "The quarterly Parent-Teacher meeting is scheduled for August 12th, 2025. Teachers will be available to discuss your child's academic progress, behavioral development, and areas for improvement. Please schedule your appointment in advance through the school office. Meeting times are from 9:00 AM to 4:00 PM."
            },
            {
                id: 3,
                title: "Library Book Return Reminder",
                date: "2025-08-11",
                category: "Library",
                priority: "low",
                preview: "Reminder for students to return overdue library books by the deadline.",
                content: "This is a friendly reminder for all students to return their overdue library books by August 14th, 2025. Late fees will be applied for books returned after the due date. Students with outstanding books will not be able to borrow new materials until all items are returned. Please visit the library during school hours for assistance."
            },
            {
                id: 4,
                title: "Science Exhibition 2025",
                date: "2025-08-09",
                category: "Academic",
                priority: "high",
                preview: "Students showcase innovative science projects and experiments.",
                content: "Our annual Science Exhibition is scheduled for August 20th, 2025. Students from all grades will display their innovative science projects and conduct live experiments. The exhibition will be judged by renowned scientists and educators. Parents and visitors are welcome to attend from 10:00 AM to 3:00 PM. Entry is free for all attendees."
            },
            {
                id: 5,
                title: "New Uniform Policy Update",
                date: "2025-08-08",
                category: "Administration",
                priority: "medium",
                preview: "Important updates to school uniform guidelines and requirements.",
                content: "Please note the updated uniform policy effective from the new academic session. All students must wear the prescribed uniform as per the new guidelines. The updated policy includes specific requirements for shoes, accessories, and seasonal variations. Detailed guidelines are available at the school office and on our website."
            },
            {
                id: 6,
                title: "Canteen Menu Update",
                date: "2025-08-07",
                category: "Services",
                priority: "low",
                preview: "New healthy meal options added to the school canteen menu.",
                content: "We are pleased to introduce new healthy meal options in our school canteen menu. The updated menu includes fresh salads, fruit juices, whole grain sandwiches, and traditional Indian meals. All food items are prepared under strict hygiene standards. Monthly meal plans are available for advance booking at discounted rates."
            },
            {
                id: 7,
                title: "Computer Lab Upgrade Complete",
                date: "2025-08-05",
                category: "Infrastructure",
                priority: "medium",
                preview: "State-of-the-art computers and software installed in the computer laboratory.",
                content: "We are excited to announce the completion of our computer lab upgrade. The lab now features 40 new high-performance computers with the latest software applications. All systems are connected to high-speed internet and equipped with educational software for enhanced learning. Students will begin using the new facility from August 16th, 2025."
            },
            {
                id: 8,
                title: "Independence Day Celebration",
                date: "2025-08-03",
                category: "Events",
                priority: "high",
                preview: "Special Independence Day program featuring cultural performances and flag hoisting.",
                content: "Join us for our Independence Day celebration on August 15th, 2025. The program will begin at 8:00 AM with flag hoisting ceremony followed by cultural performances, patriotic songs, and speeches. All students are required to wear white dress for the occasion. Light refreshments will be served after the program."
            },
            {
                id: 9,
                title: "Monsoon Safety Guidelines",
                date: "2025-08-02",
                category: "Safety",
                priority: "high",
                preview: "Important safety measures during monsoon season for all students.",
                content: "With the onset of monsoon season, please follow these safety guidelines: Carry raincoats and umbrellas, wear non-slip shoes, avoid playing in waterlogged areas, and inform parents about any weather-related school closures. Emergency contact numbers are displayed at the school entrance. Students should stay indoors during heavy rainfall breaks."
            },
            {
                id: 10,
                title: "Art Competition Results",
                date: "2025-08-01",
                category: "Results",
                priority: "low",
                preview: "Winners announced for the inter-house art competition held last month.",
                content: "Congratulations to all participants of the inter-house art competition. The results are: 1st Place - Neha Sharma (Red House), 2nd Place - Arjun Patel (Blue House), 3rd Place - Priya Singh (Green House). Special appreciation awards go to Rahul Kumar and Anita Das for their creative efforts. Prize distribution will be held during the morning assembly on August 18th, 2025."
            }
        ];

        class SchoolGallery {
            constructor() {
                this.currentSlide = 0;
                this.viewMode = 'slider';
                this.images = galleryData;
                this.touchStartX = 0;
                this.touchEndX = 0;
                this.isTransitioning = false;
                
                this.initializeGallery();
                this.setupEventListeners();
                this.setupTouchEvents();
                this.setupKeyboardNavigation();
            }

            initializeGallery() {
                this.loadImages();
                this.createIndicators();
                this.updateSlide();
            }

            loadImages() {
                const wrapper = document.getElementById('carouselWrapper');
                wrapper.innerHTML = '';

                if (this.viewMode === 'slider') {
                    this.images.forEach((image, index) => {
                        const slide = this.createSlide(image, index);
                        wrapper.appendChild(slide);
                    });
                } else {
                    const gridSlide = document.createElement('div');
                    gridSlide.className = 'carousel-slide grid-view';
                    
                    this.images.forEach((image, index) => {
                        const container = this.createImageContainer(image, index);
                        gridSlide.appendChild(container);
                    });
                    
                    wrapper.appendChild(gridSlide);
                }
            }

            createSlide(image, index) {
                const slide = document.createElement('div');
                slide.className = 'carousel-slide';
                slide.setAttribute('role', 'tabpanel');
                slide.setAttribute('aria-label', `Image ${index + 1} of ${this.images.length}`);
                
                const container = this.createImageContainer(image, index);
                slide.appendChild(container);
                
                return slide;
            }

            createImageContainer(image, index) {
                const container = document.createElement('div');
                container.className = 'image-container';
                container.setAttribute('tabindex', '0');
                container.setAttribute('role', 'button');
                container.setAttribute('aria-label', `Open ${image.title} in modal`);
                
                const img = document.createElement('img');
                img.className = 'carousel-image';
                img.src = image.src;
                img.alt = image.title;
                img.loading = 'lazy';
                
                const caption = document.createElement('div');
                caption.className = 'image-caption';
                caption.innerHTML = `
                    <div class="caption-title">${image.title}</div>
                    <div class="caption-description">${image.description}</div>
                `;
                
                container.appendChild(img);
                container.appendChild(caption);
                
                container.addEventListener('click', () => this.openModal(image));
                container.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        this.openModal(image);
                    }
                });
                
                return container;
            }

            createIndicators() {
                const indicatorContainer = document.getElementById('indicators');
                indicatorContainer.innerHTML = '';
                
                if (this.viewMode === 'slider') {
                    this.images.forEach((_, index) => {
                        const indicator = document.createElement('div');
                        indicator.className = 'indicator';
                        indicator.setAttribute('role', 'tab');
                        indicator.setAttribute('aria-label', `Go to slide ${index + 1}`);
                        indicator.setAttribute('tabindex', '0');
                        indicator.addEventListener('click', () => this.goToSlide(index));
                        indicator.addEventListener('keydown', (e) => {
                            if (e.key === 'Enter' || e.key === ' ') {
                                e.preventDefault();
                                this.goToSlide(index);
                            }
                        });
                        indicatorContainer.appendChild(indicator);
                    });
                }
            }

            setupEventListeners() {
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                const viewToggle = document.querySelectorAll('.toggle-btn');
                const modal = document.getElementById('imageModal');
                const closeModal = document.getElementById('closeModal');

                prevBtn.addEventListener('click', () => this.previousSlide());
                nextBtn.addEventListener('click', () => this.nextSlide());

                viewToggle.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.switchView(e.target.dataset.view);
                    });
                });

                closeModal.addEventListener('click', () => this.closeModal());
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) this.closeModal();
                });

                // Auto-play functionality (pauses on hover)
                let autoPlayInterval = setInterval(() => this.nextSlide(), 5000);
                
                const container = document.querySelector('.carousel-container');
                container.addEventListener('mouseenter', () => clearInterval(autoPlayInterval));
                container.addEventListener('mouseleave', () => {
                    autoPlayInterval = setInterval(() => this.nextSlide(), 5000);
                });
            }

            setupTouchEvents() {
                const wrapper = document.getElementById('carouselWrapper');
                
                wrapper.addEventListener('touchstart', (e) => {
                    this.touchStartX = e.changedTouches[0].screenX;
                });

                wrapper.addEventListener('touchend', (e) => {
                    this.touchEndX = e.changedTouches[0].screenX;
                    this.handleGesture();
                });
            }

            setupKeyboardNavigation() {
                document.addEventListener('keydown', (e) => {
                    if (document.getElementById('imageModal').style.display === 'block') {
                        if (e.key === 'Escape') this.closeModal();
                        return;
                    }

                    if (this.viewMode === 'slider') {
                        if (e.key === 'ArrowLeft') this.previousSlide();
                        if (e.key === 'ArrowRight') this.nextSlide();
                    }
                });
            }

            handleGesture() {
                const swipeThreshold = 50;
                const diff = this.touchStartX - this.touchEndX;
                
                if (Math.abs(diff) > swipeThreshold && this.viewMode === 'slider') {
                    if (diff > 0) {
                        this.nextSlide();
                    } else {
                        this.previousSlide();
                    }
                }
            }

            switchView(view) {
                if (this.viewMode === view) return;
                
                this.viewMode = view;
                this.currentSlide = 0;
                
                document.querySelectorAll('.toggle-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.view === view);
                });
                
                this.loadImages();
                this.createIndicators();
                this.updateSlide();
                this.updateControls();
            }

            updateControls() {
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                
                if (this.viewMode === 'grid') {
                    prevBtn.style.display = 'none';
                    nextBtn.style.display = 'none';
                } else {
                    prevBtn.style.display = 'block';
                    nextBtn.style.display = 'block';
                }
            }

            goToSlide(index) {
                if (this.isTransitioning || this.viewMode === 'grid') return;
                this.currentSlide = index;
                this.updateSlide();
            }

            nextSlide() {
                if (this.isTransitioning || this.viewMode === 'grid') return;
                this.currentSlide = (this.currentSlide + 1) % this.images.length;
                this.updateSlide();
            }

            previousSlide() {
                if (this.isTransitioning || this.viewMode === 'grid') return;
                this.currentSlide = this.currentSlide === 0 ? this.images.length - 1 : this.currentSlide - 1;
                this.updateSlide();
            }

            updateSlide() {
                if (this.viewMode === 'grid') return;
                
                const wrapper = document.getElementById('carouselWrapper');
                const translateX = -this.currentSlide * 100;
                
                this.isTransitioning = true;
                wrapper.style.transform = `translateX(${translateX}%)`;
                
                setTimeout(() => {
                    this.isTransitioning = false;
                }, 500);

                this.updateIndicators();
            }

            updateIndicators() {
                const indicators = document.querySelectorAll('.indicator');
                indicators.forEach((indicator, index) => {
                    indicator.classList.toggle('active', index === this.currentSlide);
                    indicator.setAttribute('aria-selected', index === this.currentSlide);
                });
            }

            openModal(image) {
                const modal = document.getElementById('imageModal');
                const modalImage = document.getElementById('modalImage');
                const modalTitle = document.getElementById('modalTitle');
                const modalDescription = document.getElementById('modalDescription');

                modalImage.src = image.src;
                modalImage.alt = image.title;
                modalTitle.textContent = image.title;
                modalDescription.textContent = image.description;

                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
                
                // Focus management for accessibility
                modal.focus();
            }

            closeModal() {
                const modal = document.getElementById('imageModal');
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        class AnnouncementsManager {
            constructor() {
                this.announcements = announcementsData;
                this.currentPage = 0;
                this.itemsPerPage = 6;
                this.isCollapsed = false;
                this.expandedCards = new Set();
                
                this.initializeAnnouncements();
                this.setupAnnouncementListeners();
            }

            initializeAnnouncements() {
                this.sortAnnouncementsByDate();
                this.renderAnnouncements();
                this.setupPagination();
            }

            sortAnnouncementsByDate() {
                this.announcements.sort((a, b) => new Date(b.date) - new Date(a.date));
            }

            formatDate(dateString) {
                const options = { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                };
                return new Date(dateString).toLocaleDateString('en-US', options);
            }

            getDaysAgo(dateString) {
                const today = new Date();
                const announceDate = new Date(dateString);
                const diffTime = today - announceDate;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                if (diffDays === 0) return 'Today';
                if (diffDays === 1) return '1 day ago';
                if (diffDays < 7) return `${diffDays} days ago`;
                if (diffDays < 30) return `${Math.ceil(diffDays / 7)} weeks ago`;
                return `${Math.ceil(diffDays / 30)} months ago`;
            }

            getPriorityIcon(priority) {
                switch (priority) {
                    case 'high': return '🔥';
                    case 'medium': return '⚡';
                    case 'low': return '📌';
                    default: return '📌';
                }
            }

            renderAnnouncements() {
                const grid = document.getElementById('announcementsGrid');
                const startIndex = this.currentPage * this.itemsPerPage;
                const endIndex = startIndex + this.itemsPerPage;
                const currentAnnouncements = this.announcements.slice(startIndex, endIndex);

                grid.innerHTML = '';

                currentAnnouncements.forEach((announcement, index) => {
                    const card = document.createElement('div');
                    card.className = 'announcement-card';
                    card.setAttribute('tabindex', '0');
                    card.setAttribute('role', 'button');
                    card.setAttribute('aria-expanded', 'false');
                    card.setAttribute('aria-label', `${announcement.title}. Click to expand details.`);

                    const isExpanded = this.expandedCards.has(announcement.id);
                    if (isExpanded) {
                        card.classList.add('expanded');
                        card.setAttribute('aria-expanded', 'true');
                    }

                    card.innerHTML = `
                        <div class="announcement-priority priority-${announcement.priority}">
                            ${announcement.priority}
                        </div>
                        <div class="announcement-date">
                            🗓️ ${this.formatDate(announcement.date)} • ${this.getDaysAgo(announcement.date)}
                        </div>
                        <div class="announcement-category">${announcement.category}</div>
                        <h3 class="announcement-title">${this.getPriorityIcon(announcement.priority)} ${announcement.title}</h3>
                        <p class="announcement-preview">${announcement.preview}</p>
                        <div class="announcement-content">${announcement.content}</div>
                        <div class="announcement-expand-indicator">▼ Click to ${isExpanded ? 'collapse' : 'expand'}</div>
                    `;

                    card.addEventListener('click', () => this.toggleCard(announcement.id, card));
                    card.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            this.toggleCard(announcement.id, card);
                        }
                    });

                    grid.appendChild(card);
                });
            }

            toggleCard(announcementId, cardElement) {
                const isCurrentlyExpanded = this.expandedCards.has(announcementId);
                
                if (isCurrentlyExpanded) {
                    this.expandedCards.delete(announcementId);
                    cardElement.classList.remove('expanded');
                    cardElement.setAttribute('aria-expanded', 'false');
                } else {
                    this.expandedCards.add(announcementId);
                    cardElement.classList.add('expanded');
                    cardElement.setAttribute('aria-expanded', 'true');
                }

                // Update the expand indicator text
                const indicator = cardElement.querySelector('.announcement-expand-indicator');
                indicator.textContent = `▼ Click to ${isCurrentlyExpanded ? 'expand' : 'collapse'}`;
            }

            setupPagination() {
                const totalPages = Math.ceil(this.announcements.length / this.itemsPerPage);
                const paginationContainer = document.getElementById('announcementsPagination');
                
                if (totalPages <= 1) {
                    paginationContainer.style.display = 'none';
                    return;
                }

                paginationContainer.style.display = 'flex';
                paginationContainer.innerHTML = `
                    <button class="pagination-btn" id="prevPage" ${this.currentPage === 0 ? 'disabled' : ''}>
                        ← Previous
                    </button>
                    <span class="pagination-info">
                        Page ${this.currentPage + 1} of ${totalPages}
                    </span>
                    <button class="pagination-btn" id="nextPage" ${this.currentPage === totalPages - 1 ? 'disabled' : ''}>
                        Next →
                    </button>
                `;

                document.getElementById('prevPage').addEventListener('click', () => {
                    if (this.currentPage > 0) {
                        this.currentPage--;
                        this.renderAnnouncements();
                        this.setupPagination();
                    }
                });

                document.getElementById('nextPage').addEventListener('click', () => {
                    if (this.currentPage < totalPages - 1) {
                        this.currentPage++;
                        this.renderAnnouncements();
                        this.setupPagination();
                    }
                });
            }

            setupAnnouncementListeners() {
                const toggleBtn = document.getElementById('announcementsToggle');
                const grid = document.getElementById('announcementsGrid');
                
                toggleBtn.addEventListener('click', () => {
                    this.isCollapsed = !this.isCollapsed;
                    grid.classList.toggle('collapsed', this.isCollapsed);
                    toggleBtn.textContent = this.isCollapsed ? 'Show More' : 'Show Less';
                    toggleBtn.setAttribute('aria-label', 
                        this.isCollapsed ? 'Expand announcements view' : 'Collapse announcements view'
                    );
                });
            }
        }

        // Initialize gallery and announcements when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new SchoolGallery();
            new AnnouncementsManager();
        });

        // Performance optimization - Intersection Observer for lazy loading
        if ('IntersectionObserver' in window) {
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.classList.remove('loading');
                        observer.unobserve(img);
                    }
                });
            });

            document.addEventListener('DOMContentLoaded', () => {
                const images = document.querySelectorAll('img[loading="lazy"]');
                images.forEach(img => imageObserver.observe(img));
            });
        }
    </script>
</body>
</html>
